<template>
	<div class="container">
		<div id="sameday" style="width: 550px; height: 250px;"></div>
	</div>
</template>

<script setup>
	import {
		ref,
		onMounted
	} from "vue";
	import * as echarts from "echarts";

	// 创建一个 ref 用于持有图表实例
	const chartInstance = ref(null);

	// 使用 onMounted 钩子初始化 ECharts 实例并设置选项
	onMounted(() => {
		const chartDom = document.getElementById("sameday");
		chartInstance.value = echarts.init(chartDom);

		const option = {
			title: {
				text: "Monthly Sameday Visitors from 2017 to 2024",
				left: "center",
				textStyle: {
					fontSize: 12,
				},
			},
			tooltip: {
				trigger: "item",
				formatter: function(params) {
					return `${params.value[1]} ${params.value[0]}: ${params.value[2]}`;
				},
			},
			grid: {
				left: "10%",
				right: "5%",
				bottom: "15%",
				top: "10%",
				containLabel: true,
			},
			xAxis: {
				type: "category",
				name: "Month",
				nameLocation: "middle",
				nameGap: 30,
				boundaryGap: true,
				data: [
					"Jan",
					"Feb",
					"Mar",
					"Apr",
					"May",
					"Jun",
					"Jul",
					"Aug",
					"Sep",
					"Oct",
					"Nov",
					"Dec",
				],
			},
			yAxis: {
				type: "category",
				name: "Year",
				nameLocation: "middle",
				nameGap: 50,
				data: [
					"2017",
					"2018",
					"2019",
					"2020",
					"2021",
					"2022",
					"2023",
					"2024",
				],
			},
			visualMap: {
				show: true,
				min: 0,
				max: 1600000,
				dimension: 2,
				inRange: {
					color: [
						"#b0e0e6",
						"#4169e1",
						"#ff6347",
						"#ffa500",
						"#32cd32",
						"#8a2be2",
					],
				},
			},
			series: [{
				name: "Sameday Visitors",
				type: "scatter",
				symbolSize: function(data) {
					return Math.sqrt(data[2]) / 50; // 调整大小缩放
				},
				data: [
					['Jul', '2024', 1596662],
					['Jun', '2024', 1316114],
					['May', '2024', 1430741],
					['Apr', '2024', 1349927],
					['Mar', '2024', 1443963],
					['Feb', '2024', 1867660],
					['Jan', '2024', 1480098],
					['Dec', '2023', 1485901],
					['Nov', '2023', 1356802],
					['Oct', '2023', 1451703],
					['Sep', '2023', 1131585],
					['Aug', '2023', 1653866],
					['Jul', '2023', 1327863],
					['Jun', '2023', 1045878],
					['May', '2023', 1124977],
					['Apr', '2023', 1097594],
					['Mar', '2023', 977715],
					['Feb', '2023', 750341],
					['Jan', '2023', 581549],
					['Dec', '2022', 159945],
					['Nov', '2022', 170232],
					['Oct', '2022', 266791],
					['Sep', '2022', 277572],
					['Aug', '2022', 153756],
					['Jul', '2022', 7189],
					['Jun', '2022', 199881],
					['May', '2022', 358920],
					['Apr', '2022', 425903],
					['Mar', '2022', 369661],
					['Feb', '2022', 376033],
					['Jan', '2022', 450428],
					['Dec', '2021', 426559],
					['Nov', '2021', 513887],
					['Oct', '2021', 216829],
					['Sep', '2021', 348058],
					['Aug', '2021', 257966],
					['Jul', '2021', 376672],
					['Jun', '2021', 313441],
					['May', '2021', 392255],
					['Apr', '2021', 344240],
					['Mar', '2021', 349605],
					['Feb', '2021', 181813],
					['Jan', '2021', 287818],
					['Dec', '2020', 269107],
					['Nov', '2020', 312557],
					['Oct', '2020', 273764],
					['Sep', '2020', 289474],
					['Aug', '2020', 156481],
					['Jul', '2020', 50210],
					['Jun', '2020', 13205],
					['May', '2020', 7018],
					['Apr', '2020', 4658],
					['Mar', '2020', 86415],
					['Feb', '2020', 81090],
					['Jan', '2020', 1530832],
					['Dec', '2019', 1607764],
					['Nov', '2019', 1501711],
					['Oct', '2019', 1734832],
					['Sep', '2019', 1388301],
					['Aug', '2019', 1926319],
					['Jul', '2019', 1815749],
					['Jun', '2019', 1567434],
					['May', '2019', 1798738],
					['Apr', '2019', 1807902],
					['Mar', '2019', 1805451],
					['Feb', '2019', 2035523],
					['Jan', '2019', 1783758],
					['Dec', '2018', 1828558],
					['Nov', '2018', 1677037],
					['Oct', '2018', 1604400],
					['Sep', '2018', 1152948],
					['Aug', '2018', 1603257],
					['Jul', '2018', 1397393],
					['Jun', '2018', 1157422],
					['May', '2018', 1255314],
					['Apr', '2018', 1419108],
					['Mar', '2018', 1282048],
					['Feb', '2018', 1674869],
					['Jan', '2018', 1258358],
					['Dec', '2017', 1418385],
					['Nov', '2017', 1321292],
					['Oct', '2017', 1417680],
					['Sep', '2017', 1104357],
					['Aug', '2017', 1318619],
					['Jul', '2017', 1308527],
					['Jun', '2017', 1030008],
					['May', '2017', 1194092],
					['Apr', '2017', 1301637],
					['Mar', '2017', 1164835],
					['Feb', '2017', 1263236],
					['Jan', '2017', 1513000],
					['Dec', '2016', 1264044],
					['Nov', '2016', 1213893],
					['Oct', '2016', 1307480],
					['Sep', '2016', 1115553],
					['Aug', '2016', 1405647],
					['Jul', '2016', 1339066],
					['Jun', '2016', 1133170],
					['May', '2016', 1272242],
					['Apr', '2016', 1247036],
					['Mar', '2016', 1193671],
					['Feb', '2016', 1454944],
					['Jan', '2016', 1299974],
					['Dec', '2015', 1303815],
					['Nov', '2015', 1344381],
					['Oct', '2015', 1414348],
					['Sep', '2015', 1242519],
					['Aug', '2015', 1608385],
					['Jul', '2015', 1353271],
					['Jun', '2015', 1172411],
					['May', '2015', 1386839],
					['Apr', '2015', 1387618],
					['Mar', '2015', 1242058],
					['Feb', '2015', 1574123],
					['Jan', '2015', 1377093],
					['Dec', '2014', 1375681],
					['Nov', '2014', 1562331],
					['Oct', '2014', 1470484],
					['Sep', '2014', 1241926],
					['Aug', '2014', 1666809],
					['Jul', '2014', 1445797],
					['Jun', '2014', 1297678],
					['May', '2014', 1351799],
					['Apr', '2014', 1426093],
					['Mar', '2014', 1393993],
					['Feb', '2014', 1383257],
					['Jan', '2014', 1344101],
					['Dec', '2013', 1313836],
					['Nov', '2013', 1271023],
					['Oct', '2013', 1269280],
					['Sep', '2013', 1178340],
					['Aug', '2013', 1445589],
					['Jul', '2013', 1287741],
					['Jun', '2013', 1164332],
					['May', '2013', 1211591],
					['Apr', '2013', 1238786],
					['Mar', '2013', 1216775],
					['Feb', '2013', 1263616],
					['Jan', '2013', 1195450],
					['Dec', '2012', 1243291],
					['Nov', '2012', 1214337],
					['Oct', '2012', 1232327],
					['Sep', '2012', 1082486],
					['Aug', '2012', 1346349],
					['Jul', '2012', 1196291],
					['Jun', '2012', 1041419],
					['May', '2012', 1109995],
					['Apr', '2012', 1257210],
					['Mar', '2012', 1274063],
					['Feb', '2012', 1136136],
					['Jan', '2012', 1371090],
					['Dec', '2011', 1354407],
					['Nov', '2011', 1317503],
					['Oct', '2011', 1333204],
					['Sep', '2011', 1145615],
					['Aug', '2011', 1411916],
					['Jul', '2011', 1323512],
					['Jun', '2011', 1142014],
					['May', '2011', 1258741],
					['Apr', '2011', 1271544],
					['Mar', '2011', 1206451],
					['Feb', '2011', 1181261],
					['Jan', '2011', 1130951],
					['Dec', '2010', 1164316],
					['Nov', '2010', 1064673],
					['Oct', '2010', 1143513],
					['Sep', '2010', 970605],
					['Aug', '2010', 1241104],
					['Jul', '2010', 1105921],
					['Jun', '2010', 984916],
					['May', '2010', 1107475],
					['Apr', '2010', 1076157],
					['Mar', '2010', 1055902],
					['Feb', '2010', 1083981],
					['Jan', '2010', 1040977],
					['Dec', '2009', 985135],
					['Nov', '2009', 951923],
					['Oct', '2009', 1025715],
					['Sep', '2009', 851758],
					['Aug', '2009', 1042673],
					['Jul', '2009', 922667],
					['Jun', '2009', 779004],
					['May', '2009', 883559],
					['Apr', '2009', 978392],
					['Mar', '2009', 1002504],
					['Feb', '2009', 891124],
					['Jan', '2009', 1036398],
					['Dec', '2008', 959948],
					['Nov', '2008', 979736],
					['Oct', '2008', 1027643],
					['Sep', '2008', 874482],
					['Aug', '2008', 1019345],
					['Jul', '2008', 1089460],
					['Jun', '2008', 936192],
					['May', '2008', 1102186],
					['Apr', '2008', 1049762],
					['Mar', '2008', 1173683],
					['Feb', '2008', 1080446],
					['Jan', '2008', 1030413],
				],
				emphasis: {
					label: {
						show: true,
						formatter: function(params) {
							return params.value[2];
						},
						position: "top",
					},
				},
			}, ],
		};

		// 设置选项并渲染图表
		chartInstance.value.setOption(option);
	});
</script>
<style scoped lang="scss">
	.container{
		  width: 100%;
		  display: flex;
		  height: 260px; // 与 ItemWrap 一致
	}
</style>