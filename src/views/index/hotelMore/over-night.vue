<template>
	<div class="container">
		<div id="overnight" style="width: 550px; height: 250px;"></div>
	</div>
</template>

<script setup>
import { ref, onMounted } from "vue";
import * as echarts from "echarts";

// 创建一个 ref 用于持有图表实例
const chartInstance = ref(null);

// 使用 onMounted 钩子初始化 ECharts 实例并设置选项
onMounted(() => {
  const chartDom = document.getElementById("overnight");
  chartInstance.value = echarts.init(chartDom);

  const option = {
    title: {
      text: "Monthly Overnight Stay Visitors from 2017 to 2024",
      left: "center",
      textStyle: {
        fontSize: 12,
      },
    },
    tooltip: {
      trigger: "item",
      formatter: function (params) {
        return `${params.value[1]} ${params.value[0]}: ${params.value[2]}`;
      },
    },
    grid: {
      left: "10%",
      right: "5%",
      bottom: "15%",
	  top: "10%",
      containLabel: true,
    },
    xAxis: {
      type: "category",
      name: "Month",
      nameLocation: "middle",
      nameGap: 30,
      boundaryGap: true,
      data: [
        "Jan",
        "Feb",
        "Mar",
        "Apr",
        "May",
        "Jun",
        "Jul",
        "Aug",
        "Sep",
        "Oct",
        "Nov",
        "Dec",
      ],
    },
    yAxis: {
      type: "category",
      name: "Year",
      nameLocation: "middle",
      nameGap: 50,
      data: [
        "2017",
        "2018",
        "2019",
        "2020",
        "2021",
        "2022",
        "2023",
        "2024",
      ],
    },
    visualMap: {
      show: true,
      min: 0,
      max: 1600000,
      dimension: 2,
      inRange: {
        color: [
          "#b0e0e6",
          "#4169e1",
          "#ff6347",
          "#ffa500",
          "#32cd32",
          "#8a2be2",
        ],
      },
    },
    series: [
      {
        name: "Overnight Stay Visitors",
        type: "scatter",
        symbolSize: function (data) {
          return Math.sqrt(data[2]) / 50; // 调整大小缩放
        },
        data: [
          ["Jul", "2024", 1424527],
          ["Jun", "2024", 1235204],
          ["May", "2024", 1261450],
          ["Apr", "2024", 1250790],
          ["Mar", "2024", 1276621],
          ["Feb", "2024", 1425904],
          ["Jan", "2024", 1381511],
          ["Dec", "2023", 1458029],
          ["Nov", "2023", 1226795],
          ["Oct", "2023", 1305605],
          ["Sep", "2023", 1169471],
          ["Aug", "2023", 1567825],
          ["Jul", "2023", 1431681],
          ["Jun", "2023", 1163784],
          ["May", "2023", 1088830],
          ["Apr", "2023", 1176456],
          ["Mar", "2023", 979152],
          ["Feb", "2023", 843402],
          ["Jan", "2023", 816199],
          ["Dec", "2022", 229445],
          ["Nov", "2022", 196279],
          ["Oct", "2022", 313542],
          ["Sep", "2022", 280270],
          ["Aug", "2022", 177641],
          ["Jul", "2022", 2570],
          ["Jun", "2022", 180790],
          ["May", "2022", 241828],
          ["Apr", "2022", 180938],
          ["Mar", "2022", 157251],
          ["Feb", "2022", 279472],
          ["Jan", "2022", 244002],
          ["Dec", "2021", 394311],
          ["Nov", "2021", 287413],
          ["Oct", "2021", 111416],
          ["Sep", "2021", 281027],
          ["Aug", "2021", 151241],
          ["Jul", "2021", 412735],
          ["Jun", "2021", 215078],
          ["May", "2021", 473808],
          ["Apr", "2021", 450579],
          ["Mar", "2021", 404936],
          ["Feb", "2021", 245309],
          ["Jan", "2021", 268947],
          ["Dec", "2020", 390300],
          ["Nov", "2020", 323794],
          ["Oct", "2020", 308222],
          ["Sep", "2020", 159611],
          ["Aug", "2020", 70632],
          ["Jul", "2020", 23796],
          ["Jun", "2020", 9351],
          ["May", "2020", 9115],
          ["Apr", "2020", 6383],
          ["Mar", "2020", 125896],
          ["Feb", "2020", 75304],
          ["Jan", "2020", 1319633],
          ["Dec", "2019", 1475642],
          ["Nov", "2019", 1408407],
          ["Oct", "2019", 1474919],
          ["Sep", "2019", 1376623],
          ["Aug", "2019", 1696797],
          ["Jul", "2019", 1714484],
          ["Jun", "2019", 1528419],
          ["May", "2019", 1598097],
          ["Apr", "2019", 1624285],
          ["Mar", "2019", 1583480],
          ["Feb", "2019", 1510178],
          ["Jan", "2019", 1641368],
          ["Dec", "2018", 1741267],
          ["Nov", "2018", 1589246],
          ["Oct", "2018", 1549891],
          ["Sep", "2018", 1408326],
          ["Aug", "2018", 1800246],
          ["Jul", "2018", 1636904],
          ["Jun", "2018", 1445431],
          ["May", "2018", 1449431],
          ["Apr", "2018", 1541771],
          ["Mar", "2018", 1451263],
          ["Feb", "2018", 1396068],
          ["Jan", "2018", 1483107],
          ["Dec", "2017", 1635305],
          ["Nov", "2017", 1511769],
          ["Oct", "2017", 1471036],
          ["Sep", "2017", 1382026],
          ["Aug", "2017", 1547781],
          ["Jul", "2017", 1609426],
          ["Jun", "2017", 1348607],
          ["May", "2017", 1376336],
          ["Apr", "2017", 1441162],
          ["Mar", "2017", 1336384],
          ["Feb", "2017", 1231960],
          ["Jan", "2017", 1363046],
          ["Dec", "2016", 1550406],
          ["Nov", "2016", 1374752],
          ["Oct", "2016", 1370967],
          ["Sep", "2016", 1311533],
          ["Aug", "2016", 1476910],
          ["Jul", "2016", 1455789],
          ["Jun", "2016", 1225176],
          ["May", "2016", 1205349],
          ["Apr", "2016", 1224217],
          ["Mar", "2016", 1173270],
          ["Feb", "2016", 1189345],
          ["Jan", "2016", 1145902],
          ["Dec", "2015", 1330283],
          ["Nov", "2015", 1245070],
          ["Oct", "2015", 1222758],
          ["Sep", "2015", 1172980],
          ["Aug", "2015", 1424696],
          ["Jul", "2015", 1295623],
          ["Jun", "2015", 1075870],
          ["May", "2015", 1161723],
          ["Apr", "2015", 1159817],
          ["Mar", "2015", 1028527],
          ["Feb", "2015", 1101901],
          ["Jan", "2015", 1088519],
          ["Dec", "2014", 1164389],
          ["Nov", "2014", 1240042],
          ["Oct", "2014", 1183696],
          ["Sep", "2014", 1163571],
          ["Aug", "2014", 1419462],
          ["Jul", "2014", 1307597],
          ["Jun", "2014", 1134363],
          ["May", "2014", 1173227],
          ["Apr", "2014", 1210521],
          ["Mar", "2014", 1232004],
          ["Feb", "2014", 1177303],
          ["Jan", "2014", 1159508],
          ["Dec", "2013", 1272993],
          ["Nov", "2013", 1161952],
          ["Oct", "2013", 1124915],
          ["Sep", "2013", 1153985],
          ["Aug", "2013", 1425499],
          ["Jul", "2013", 1277429],
          ["Jun", "2013", 1160603],
          ["May", "2013", 1130932],
          ["Apr", "2013", 1159554],
          ["Mar", "2013", 1170506],
          ["Feb", "2013", 1113224],
          ["Jan", "2013", 1116871],
          ["Dec", "2012", 1252560],
          ["Nov", "2012", 1159773],
          ["Oct", "2012", 1115319],
          ["Sep", "2012", 1079080],
          ["Aug", "2012", 1334792],
          ["Jul", "2012", 1247973],
          ["Jun", "2012", 1065277],
          ["May", "2012", 1036547],
          ["Apr", "2012", 1124946],
          ["Mar", "2012", 1075640],
          ["Feb", "2012", 994841],
          ["Jan", "2012", 1090550],
          ["Dec", "2011", 1191311],
          ["Nov", "2011", 1100262],
          ["Oct", "2011", 1043439],
          ["Sep", "2011", 1021012],
          ["Aug", "2011", 1286087],
          ["Jul", "2011", 1227355],
          ["Jun", "2011", 1039462],
          ["May", "2011", 1036810],
          ["Apr", "2011", 1066905],
          ["Mar", "2011", 984414],
          ["Feb", "2011", 982988],
          ["Jan", "2011", 945115],
          ["Dec", "2010", 1106985],
          ["Nov", "2010", 948515],
          ["Oct", "2010", 948830],
          ["Sep", "2010", 868770],
          ["Aug", "2010", 1116585],
          ["Jul", "2010", 1056148],
          ["Jun", "2010", 919479],
          ["May", "2010", 990792],
          ["Apr", "2010", 1035406],
          ["Mar", "2010", 955197],
          ["Feb", "2010", 973585],
          ["Jan", "2010", 1005579],
          ["Dec", "2009", 1050722],
          ["Nov", "2009", 938329],
          ["Oct", "2009", 920502],
          ["Sep", "2009", 837249],
          ["Aug", "2009", 1022663],
          ["Jul", "2009", 832436],
          ["Jun", "2009", 679101],
          ["May", "2009", 707941],
          ["Apr", "2009", 888812],
          ["Mar", "2009", 881671],
          ["Feb", "2009", 763394],
          ["Jan", "2009", 879079],
          ["Dec", "2008", 948577],
          ["Nov", "2008", 860320],
          ["Oct", "2008", 822532],
          ["Sep", "2008", 753400],
          ["Aug", "2008", 921505],
          ["Jul", "2008", 972098],
          ["Jun", "2008", 796722],
          ["May", "2008", 898096],
          ["Apr", "2008", 884823],
          ["Mar", "2008", 961840],
          ["Feb", "2008", 919797],
          ["Jan", "2008", 870179],
        ],
        emphasis: {
          label: {
            show: true,
            formatter: function (params) {
              return params.value[2];
            },
            position: "top",
          },
        },
      },
    ],
  };

  // 设置选项并渲染图表
  chartInstance.value.setOption(option);
});
</script>
<style scoped lang="scss">
	.container{
		  width: 100%;
		  display: flex;
		  height: 260px; // 与 ItemWrap 一致
	}
</style>